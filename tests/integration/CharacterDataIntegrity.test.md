# キャラクターデータの整合性テスト - 概要

## 実装されたテスト

### 1. assistType 値の妥当性テスト

- **全キャラクターの assistType が有効な値であること**: "evasive" または "defensive" のみを許可
- **assistType が設定されているキャラクターの統計情報**: 設定済み/未設定の数の整合性チェック
- **assistType が未設定のキャラクターリスト**: 要件 1.3 に基づく未設定状態の検証

### 2. データファイルの構造検証テスト

- **全キャラクターが必須フィールドを持つこと**: id, name, fullName, specialty, stats, faction, rarity, attr の存在確認
- **name と fullName が多言語対応していること**: ja/en 両方の言語サポート検証
- **specialty が有効な値であること**: attack, stun, anomaly, support, defense, rupture の検証
- **stats が有効な値であること**: ether, fire, ice, physical, electric, frostAttribute, auricInk の検証
- **rarity が有効な値であること**: A または S の検証
- **attr フィールドが正しい構造を持つこと**: 配列フィールド（hp, atk, def）が 7 要素、単一値フィールドが数値

### 3. 重複や欠損データの検出テスト

- **キャラクター ID に重複がないこと**: 一意性の確認
- **キャラクター名（日本語）に重複がないこと**: 日本語名の一意性
- **キャラクター名（英語）に重複がないこと**: 英語名の一意性
- **faction ID が有効な範囲内であること**: 正の整数値の確認
- **空文字列や null 値が含まれていないこと**: 必須文字列フィールドの検証
- **数値フィールドが適切な範囲内であること**: HP/ATK/DEF の妥当な範囲、パーセンテージ値の範囲チェック

### 4. assistType と specialty の関連性テスト

- **support specialty のキャラクターの assistType 分布**: support キャラクターの支援タイプ分析
- **各 specialty における assistType の分布**: 全 specialty での assistType 分布の妥当性チェック

### 5. データ品質の詳細検証

- **assistType の値が型定義と一致すること**: TypeScript 型との整合性
- **assistType 未設定キャラクターの一覧が要件と一致すること**: 要件 1.3 の検証
- **assistType 設定済みキャラクターの分布が妥当であること**: evasive/defensive の分布チェック
- **キャラクターデータの完全性チェック**: オブジェクト構造の基本検証
- **現在のデータ状況のスナップショット**: 将来の変更追跡のためのベースライン記録

## 要件との対応

### 要件 1.1, 1.2, 1.3 への対応

- ✅ 全キャラクターの assistType 値の妥当性テスト
- ✅ データファイルの構造検証テスト
- ✅ 重複や欠損データの検出テスト

## 現在のデータ状況（テスト実行時点）

- 総キャラクター数: 40
- assistType 設定済み: 14 キャラクター
- assistType 未設定: 26 キャラクター
- evasive: 4 キャラクター
- defensive: 10 キャラクター

## テスト結果

✅ 22 個のテストがすべて通過
✅ TypeScript コンパイルエラーなし
✅ データの整合性が確認済み

このテストスイートにより、キャラクターデータの品質と整合性が継続的に監視され、assistType 統合の要件が満たされていることが保証されます。
