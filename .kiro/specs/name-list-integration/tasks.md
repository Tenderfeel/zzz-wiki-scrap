# 実装計画

- [x] 1. 名前マッピング設定ファイルと NameResolver クラスの実装

  - `src/config/name-mappings.json`ファイルを作成し、Scraping.md の名前リストを JSON 形式で定義
  - `src/mappers/NameResolver.ts`クラスを実装し、名前マッピングの読み込み・解決機能を提供
  - 名前マッピングの検証機能を実装し、起動時に設定ファイルの整合性をチェック
  - _要件: 1.1, 1.2, 3.1, 3.4_

- [x] 2. DataMapper クラスの拡張実装

  - DataMapper クラスに NameResolver を統合し、名前解決機能を追加
  - `createNamesFromMapping`メソッドを実装し、キャラクター ID から事前定義された名前を取得
  - `createNamesWithFallback`メソッドを実装し、マッピングが見つからない場合のフォールバック処理を提供
  - _要件: 1.1, 1.3, 2.1, 2.3_

- [x] 3. CharacterGenerator クラスの名前取得ロジック修正

  - `generateCharacter`メソッドを修正し、事前定義された名前マッピングを優先使用
  - キャラクター ID パラメータを明示的に受け取るように変更
  - フォールバック処理時の警告ログ出力を実装
  - _要件: 1.1, 1.4, 2.2, 2.4_

- [x] 4. エラーハンドリングとログ機能の強化

  - `NameMappingError`クラスを`src/errors/index.ts`に追加
  - 名前マッピング関連のエラーシナリオに対する適切なエラーハンドリングを実装
  - フォールバック処理時の詳細ログ出力を追加
  - _要件: 2.2, 3.4_

- [x] 5. 単体テストの作成

  - NameResolver クラスの単体テストを作成し、名前解決とバリデーション機能をテスト
  - DataMapper クラスの拡張部分の単体テストを作成
  - CharacterGenerator クラスの修正部分の単体テストを作成
  - _要件: 1.1, 2.1, 3.1_

- [x] 6. 統合テストの実装

  - 完全なデータフローの統合テストを作成し、名前マッピング使用時の正常処理を検証
  - フォールバック処理の統合テストを作成し、マッピング不在時の動作を確認
  - エラーシナリオの統合テストを実装
  - _要件: 2.4, 4.1, 4.2, 4.3_

- [x] 7. 型定義とインターフェースの更新

  - `src/types/index.ts`に`NameMapping`と`NameMappings`インターフェースを追加
  - 既存の型定義との整合性を確認し、後方互換性を維持
  - _要件: 4.1, 4.2_

- [x] 8. システム統合と動作確認
  - 全コンポーネントを統合し、既存のキャラクターデータ生成フローとの互換性を確認
  - 生成される Character オブジェクトの構造が変更されていないことを検証
  - 実際のキャラクターデータで名前マッピング機能をテスト
  - _要件: 4.1, 4.2, 4.3, 4.4_
