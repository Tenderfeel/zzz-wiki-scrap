# 実装計画

- [x] 1. ボンプリストパーサーとエントリ抽出機能の実装

  - Scraping.md からボンプエントリ情報を抽出する BompListParser クラスを作成
  - ボンプ ID、ページ ID、Wiki URL、日本語名を含む BompEntry インターフェースを定義
  - エントリ検証機能を実装してデータの整合性を確保
  - _要件: 1.1, 1.3_

- [x] 2. ボンプデータマッパーの実装

  - [x] 2.1 基本的なボンプデータマッピング機能を実装

    - API レスポンスから基本情報（id、name、stats）を抽出する機能を作成
    - 日本語属性値を英語列挙値にマッピングする機能を実装
    - 多言語名オブジェクトを生成する機能を作成
    - _要件: 3.2, 3.3, 5.1, 5.2_

  - [x] 2.2 ボンプ属性データ抽出機能を実装

    - ascension コンポーネントからボンプ属性データを抽出
    - 既存の AttributesProcessor を活用して HP、攻撃力、防御力配列を処理
    - 単一値属性（impact、critRate など）の抽出機能を実装
    - _要件: 2.1, 2.2, 2.4_

  - [x] 2.3 追加能力抽出機能を実装
    - modules データから『追加能力』情報を抽出
    - talent または skill コンポーネントから能力説明文を取得
    - 日本語テキストの適切な処理とクリーニング機能を実装
    - _要件: 2.1_

- [x] 3. ボンプデータプロセッサーの実装

  - [x] 3.1 ボンプデータ処理パイプラインを作成

    - BompEntry から ProcessedBompData への変換機能を実装
    - 既存の HoyoLabApiClient を使用した API データ取得
    - 日本語・英語両方のデータ取得とエラーハンドリング
    - _要件: 1.2, 1.5, 4.2, 5.3_

  - [x] 3.2 ボンプ派閥情報処理機能を実装

    - baseInfo コンポーネントから派閥 ID を抽出
    - 複数派閥への所属可能性を考慮した配列処理
    - 派閥データの検証と整合性チェック
    - _要件: 3.5_

  - [x] 3.3 データ検証とエラーハンドリング機能を実装
    - ProcessedBompData の妥当性検証機能
    - 必須フィールドの存在確認と型チェック
    - グレースフル劣化とエラー回復機能の実装
    - _要件: 4.2, 4.5_

- [x] 3.4 ボンプデータプロセッサーの単体テストを作成

  - API データ変換ロジックのテスト
  - エラーケース処理のテスト
  - 派閥情報抽出機能のテスト
  - _要件: 4.2, 4.5_

- [x] 4. ボンプジェネレーターの実装

  - [x] 4.1 ボンプオブジェクト生成機能を実装

    - ProcessedBompData から Bomp オブジェクトへの変換
    - 多言語データの統合と名前フォールバック処理
    - 実装バージョン情報の適切な設定
    - _要件: 5.1, 5.3, 5.4_

  - [x] 4.2 ボンプデータ検証機能を実装

    - 生成された Bomp オブジェクトの完全性チェック
    - 必須フィールドと配列長の検証（HP、ATK、DEF が 7 要素）
    - 列挙値の妥当性確認と多言語オブジェクトの検証
    - _要件: 4.4_

  - [x] 4.3 TypeScript ファイル出力機能を実装
    - data/bomps.ts ファイルの生成機能
    - 適切な import 文と型注釈を含むファイル構造
    - ボンプ配列の整形された TypeScript コード出力
    - _要件: 1.4_

- [x] 4.4 ボンプジェネレーターの単体テストを作成

  - ボンプオブジェクト生成機能のテスト
  - データ検証ロジックのテスト
  - ファイル出力機能のテスト
  - _要件: 4.4_

- [x] 5. バッチ処理とメイン実行機能の実装

  - [x] 5.1 ボンプバッチプロセッサーを実装

    - 全 32 ボンプの順次処理機能
    - API レート制限対応（リクエスト間遅延）
    - 処理統計とプログレス追跡機能
    - _要件: 1.1, 4.3_

  - [x] 5.2 エラー回復とリトライ機能を実装

    - API 失敗時のリトライ機構（最大 3 回）
    - 部分的失敗での処理継続機能
    - 詳細なエラーログとレポート生成
    - _要件: 1.5, 4.2, 4.5_

  - [x] 5.3 メイン実行スクリプトを作成
    - 全ボンプデータ生成の統合実行機能
    - 設定ファイルからの処理パラメータ読み込み
    - 実行結果の検証と出力ファイル確認
    - _要件: 4.1_

- [x] 5.4 統合テストスイートを作成

  - エンドツーエンド処理のテスト
  - 実際の API との統合テスト
  - パフォーマンステストとメモリ使用量測定
  - _要件: 4.1, 4.3_

- [x] 6. 設定管理とドキュメント整備

  - [x] 6.1 ボンプ処理設定ファイルを作成

    - バッチサイズ、遅延時間、リトライ回数の設定
    - 出力パスと検証オプションの設定
    - 環境別設定の対応
    - _要件: 4.1_

  - [x] 6.2 型定義ファイルの更新

    - src/types/index.ts に Bomp 型定義を追加
    - ProcessedBompData と関連インターフェースの定義
    - 既存型との整合性確保
    - _要件: 3.1_

  - [x] 6.3 README とドキュメントの更新
    - ボンプデータ生成機能の使用方法を記載
    - API 仕様とデータ構造の説明
    - トラブルシューティングガイドの作成
    - _要件: 4.1_
