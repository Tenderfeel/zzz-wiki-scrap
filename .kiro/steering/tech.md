---
inclusion: always
---

# 技術スタック・開発規約

## プロジェクト概要

Zenless Zone Zero (ZZZ) wiki キャラクター情報のデータスクレイピング・API 統合プロジェクト

## 技術スタック

- **言語**: TypeScript (Node.js)
- **テスト**: Vitest
- **ビルド**: TypeScript Compiler (tsc)
- **パッケージ管理**: npm

## API 仕様

- **エンドポイント**: `https://sg-wiki-api-static.hoyolab.com/hoyowiki/zzz/wapi/entry_page`
- **認証**: 不要
- **レート制限**: 実装必須（適切な間隔でリクエスト）
- **パラメータ**:
  - `entry_page_id`: 2-902 の範囲のキャラクターページ ID
  - `lang`: `ja-jp` (日本語) または `en-us` (英語)

## 言語・ローカライゼーション

- **プライマリ**: 日本語 (`ja-jp`)
- **フォールバック**: 英語 (`en-us`)
- **コード内コメント**: 日本語
- **ドキュメント**: 日本語
- **変数名・関数名**: 英語 (PascalCase/camelCase)

## データ処理パターン

### 必須処理フロー

1. 日本語 API リクエスト → 英語 API リクエスト (フォールバック)
2. JSON 解析 → ネストされた JSON 文字列の再解析
3. 日本語値 → 英語 enum 値へのマッピング
4. 数値変換 (`"-"` → `0`, `"50%"` → `50`)
5. 型安全性検証 → TypeScript 型への適合

### エラーハンドリング規約

- カスタムエラークラス使用 (`src/errors/`)
- 詳細ログ出力 (処理状況・エラー詳細)
- グレースフルデグラデーション (部分的失敗でも継続)
- 必須フィールド検証・デフォルト値設定

## コード品質基準

- **型安全性**: 厳密な TypeScript 型定義必須
- **テストカバレッジ**: 単体・統合・パフォーマンステスト
- **設定管理**: `processing-config.json`による設定外部化
